document.addEventListener("alpine:init",()=>{Alpine.data("grapesjs",({state:e,statePath:r,readOnly:d,tools:s,minHeight:o,container:t})=>({instance:null,state:e,tools:s,async init(){let[i]=await Promise.all([fetch("/storage/test-template.tpl").then(n=>n.text())]);console.log(i),this.instance=grapesjs.init({height:o+"px",container:t||".filament-grapesjs .grapesjs-wrapper",showOffsets:!0,fromElement:!0,noticeOnUnload:!1,storageManager:!1,loadHtml:e,plugins:["grapesjs-preset-newsletter"],inlineCss:!0,modalLabelExport:"Export",blockManager:{blocks:[{id:"profile-address",label:"{{EMAIL}}",content:"<div>{{EMAIL}}</div>"},{id:"profile-id",label:"{{ID}}",content:"<div>{{ID}}</div>"},{id:"profile-firstname",label:"{{FIRST_NAME}}",content:"<div>{{FIRST_NAME}}</div>"},{id:"profile-lastname",label:"{{LAST_NAME}}",content:"<div>{{LAST_NAME}}</div>"},{id:"profile-position",label:"{{POSITION}}",content:"<div>{{POSITION}}</div>"},{id:"test",label:'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M7 12H17M8 8.5C8 8.5 9 9 10 9C11.5 9 12.5 8 14 8C15 8 16 8.5 16 8.5M8 15.5C8 15.5 9 16 10 16C11.5 16 12.5 15 14 15C15 15 16 15.5 16 15.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>',content:i}]}}),this.instance.on("update",n=>{var l=this.instance.getHtml({cleanId:!0}),a=l.match(/<body\b[^>]*>([\s\S]*?)<\/body>/);a?this.state=a[1]:this.state=this.instance.getHtml()})}}))});
