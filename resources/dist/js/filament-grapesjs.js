document.addEventListener("alpine:init",()=>{Alpine.data("grapesjs",({state:e,statePath:r,readOnly:c,tools:l,minHeight:i,container:a})=>({instance:null,state:e,tools:l,async init(){let[t]=await Promise.all([fetch("/storage/test-template.tpl").then(s=>s.text())]);console.log(t),this.instance=grapesjs.init({height:i+"px",container:a||".filament-grapesjs .grapesjs-wrapper",showOffsets:!0,fromElement:!0,noticeOnUnload:!1,storageManager:!1,loadHtml:e,plugins:["grapesjs-preset-newsletter"],inlineCss:!0,modalLabelExport:"Export",blockManager:{blocks:[{id:"custom-cta",label:"{{VAR}}",content:"<div>{{VAR}}</div>"},{id:"test",label:t,content:t}]}}),this.instance.on("update",s=>{var o=this.instance.getHtml({cleanId:!0}),n=o.match(/<body\b[^>]*>([\s\S]*?)<\/body>/);n?this.state=n[1]:this.state=this.instance.getHtml()})}}))});
